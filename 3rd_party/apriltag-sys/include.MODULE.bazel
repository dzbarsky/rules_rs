crate = use_extension("@rules_rs//rs:extensions.bzl", "crate")
crate.annotation(
    additive_build_file_content = """
load("@rules_cc//cc:cc_library.bzl", "cc_library")

cc_library(
    name = "apriltags",
    srcs = glob(
        [
            "apriltag-src/*.c",
            "apriltag-src/*.h",
            "apriltag-src/common/*.c",
            "apriltag-src/common/*.h",
        ],
        exclude = [
            "apriltag-src/apriltag_pywrap.c",
        ],
    ),
    includes = ["apriltag-src"],
)""",
    crate = "apriltag-sys",
    gen_build_script = "off",
    repositories = ["crates"],
    deps = [
        ":apriltags",
    ],
)
