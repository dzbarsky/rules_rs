diff --git a/MODULE.bazel b/MODULE.bazel
index e4611b9..47bf953 100644
--- a/MODULE.bazel
+++ b/MODULE.bazel
@@ -73,16 +73,12 @@ http_archive(
     build_file = "//third_party/libc/musl:BUILD.tpl",
 )
 
-http_pkg_archive = use_repo_rule("//:http_pkg_archive.bzl", "http_pkg_archive")
-http_pkg_archive(
+http_archive(
     name = "macosx15.4.sdk",
-    urls = ["https://swcdn.apple.com/content/downloads/10/32/082-12052-A_AHPGDY76PT/1a419zaf3vh8o9t3c0usblyr8eystpnsh5/CLTools_macOSNMOS_SDK.pkg"],
-    strip_files = [
-        "Library/Developer/CommandLineTools/SDKs/MacOSX15.4.sdk/System/Library/Frameworks/Ruby.framework/Versions/Current/Headers/ruby",
-    ],
-    sha256 = "f8b0600aa4ad9b0b0b150fb62691dc561f47bc33ebc40546439f1460a0680913",
+    urls = ["https://github.com/hexops-graveyard/sdk-macos-11.3/archive/ccbaae84cc39469a6792108b24480a4806e09d59.tar.gz"],
+    integrity = "sha256-EYcKSj04K3g0mGEIEmSSG7iDRAp+Cz3UoAc3PYcySjg=",
     build_file = "//third_party/macosx.sdk:BUILD.MacOSX15.4.sdk.tpl",
-    strip_prefix = "Library/Developer/CommandLineTools/SDKs/MacOSX15.4.sdk",
+    strip_prefix = "sdk-macos-11.3-ccbaae84cc39469a6792108b24480a4806e09d59/root",
 )
 
 glibc = use_extension("//runtimes/glibc/extension:glibc.bzl", "glibc")
diff --git a/third_party/macosx.sdk/BUILD.MacOSX15.4.sdk.tpl b/third_party/macosx.sdk/BUILD.MacOSX15.4.sdk.tpl
index 1fc14f0..909659d 100644
--- a/third_party/macosx.sdk/BUILD.MacOSX15.4.sdk.tpl
+++ b/third_party/macosx.sdk/BUILD.MacOSX15.4.sdk.tpl
@@ -31,7 +31,7 @@ COMMON_EXCLUDES = [
     "usr/include/pexpert/**",
     "usr/include/Spatial/**",
     "usr/include/tidy/**",
-])
+], allow_empty = True)
 
 directory(
     name = "sysroot",
@@ -42,7 +42,7 @@ directory(
         "System/Library/CoreServices/**",
         "System/Library/Perl/**",
         "System/Library/PrivateFrameworks/**",
-    ])),
+    ], allow_empty = True)),
     visibility = ["//visibility:public"],
 )
 
